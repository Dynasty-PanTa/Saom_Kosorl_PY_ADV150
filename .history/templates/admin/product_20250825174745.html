{% extends "admin/admin_master.html" %}

{% block title %}Admin Products{% endblock %}

{% block main_content %}
<div style="max-width: 1000px; margin: 2rem auto; padding: 0 1rem;">

  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h2>All Products</h2>
    <a href="{{ url_for('add_product') }}" style="
        padding: 0.5rem 1rem;
        background: #38a169;
        color: white;
        border-radius: 8px;
        text-decoration: none;
        transition: 0.3s;
    " onmouseover="this.style.background='#2f855a'" onmouseout="this.style.background='#38a169'">
      + Add Product
    </a>
  </div>

  <div style="display: flex; flex-wrap: wrap; gap: 1.5rem;">
    {% for p in products %}
    <div style="
        flex: 1 1 220px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        overflow: hidden;
    ">
      <div style="height: 160px; display: flex; align-items: center; justify-content: center; background: #f7f7f7;">
        <img src="{{ p['image'] }}" alt="{{ p['name'] }}" style="max-width: 100%; max-height: 140px; object-fit: contain;">
      </div>

      <div style="padding: 1rem; flex: 1; display: flex; flex-direction: column;">
        <h4 style="margin: 0 0 0.3rem 0;">{{ p['name'] }}</h4>
        <small style="color: #555; margin-bottom: 0.5rem;">{{ p['category'] }}</small>
        <strong style="color: #111; margin-bottom: 1rem;">${{ p['price'] }}</strong>

        <div style="margin-top: auto; display: flex; gap: 0.5rem;">
          <a href="{{ url_for('edit_product', id=p['id']) }}" class="btn btn-primary">
            Edit
          </a>
          <form action="{{ url_for('delete_product', id=p['id']) }}" method="post" style="flex: 1;">
          <a href="{{ url_for('delete', id=p['id']) }}" class="btn btn-danger">
            Edit
          </a>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

</div>
{% endblock %}
